grids:
    swissgrid:
        resolutions: [750, 500, 250, 100, 50]
        bbox: [420000, 30000, 900000, 350000]
        tile_size: 256
        srs: epsg:21781

caches:
    local:
        type: filesystem
        http_url: http://taurus/tiles
        folder: /var/www/tiles
    s3:
        type: s3
        http_url: https://%(host)s/%(bucket)s/%(folder)s
        host: s3-eu-west-1.amazonaws.com
        bucket: tiles
        folder: tiles

layer_default:
    grid: swissgrid
    type: wms
    url: http://dev.regiogis-beo.ch/main/wsgi/mapserv_proxy # ${mapserv_url}
    extension: png
    mime_type: image/png
    wmts:
        style: default
    dimensions:
        -   name: VERSION
            default: 1
            value: 1
            values: [1]
    meta: on
    meta_size: 8
    meta_buffer: 128
    connection: user=www-data password=www-data dbname=sbbgeoportal_c2c host=pgcluster0t.bgdi.admin.ch
    sql: ST_Union(ST_Buffer(geom, 100, 2)) FROM webapp.verbund_map

layers:
    mapnik:
        type: mapnik
        mapfile: sbb_verbund.mapnik
        output_format: png
    grid:
        type: mapnik
        mapfile: sbb_verbund.mapnik
        output_format: grid
        extension: json
        mime_type: application/utfgrid
        resolution: 4
        meta: off
        data_buffer: 128
        layers_fields:
            verbund:
            - name
            - verbund1
            - verbund2
            - verbund3
            - verbund4

generation:
    default_cache: local
    default_layers: [mapnik, grid]
    authorised_user: www-data
    maxconsecutive_errors: 10
