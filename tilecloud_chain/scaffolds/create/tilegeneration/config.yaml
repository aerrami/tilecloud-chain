
grids:
    swissgrid:
        # scale used to work with work internaly with integer resolutions [optional, default to 1]
        resolution_scale: 10
        # resolutions, bbox, srs [required]
        resolutions: [1000, 500, 250, 100, 50, 20, 10, 5, 2, 1, 0.5]
        bbox: [420000, 30000, 900000, 350000]
        srs: EPSG:21781
        # [optional, default to 256]
        tile_size: 256

caches:
    local:
        type: filesystem
        # can includes %(folder)s for the folder
        http_url: http://taurus/tiles
        folder: /var/www/tiles
    s3:
        type: s3
        # %(bucket)s and %(folder)s comes from this cache
        http_url: https://%(host)s/%(bucket)s/%(folder)s
        bucket: tiles
        folder: tiles

# this defines some defaults values for all the layers
layer_default:
    # name of the grid to use (defined in grids)
    grid: swissgrid
    type: wms
    # the URL of the WMS server to used
    url: http://wms.geo.admin.ch/
    # file name extension
    extension: png
    # the bbox there we want to generate tiles
    #bbox: [493000, 114000, 586000, 204000]
    # mime type used for the WMS request and the WMTS capabilities generation
    mime_type: image/png
    wmts_style: default
    # the WMTS demensions definition [default to []]
    dimensions:
        -   name: VERSION
            # the default value for the WMTS capabilities
            default: 1
            # the generated value
            value: 1
            # all the available values in the WMTS capabilities
            values: [1]
    # the meta tiles definition [default to off]
    meta: on
    # the meta tiles size [default to 8]
    meta_size: 8
    # the meta tiles buffer [default to 128]
    meta_buffer: 128
    # connexion an sql to get the geometry where we want to generate tiles
#    connection: user=www-data password=www-data dbname=<db> host=localhost
#    sql: ST_Union(ST_Buffer(geom, 10, 2)) FROM <table>
    # size and hash used to detect empty tiles and metatiles [optional, default to None]
    # can be generate by (with en emty tile):
    # ./buildout/bin/generate_tiles --get-hash <z/x/y> -l <layer_name>
    empty_tile_detection:
        size: 1096
        hash: -2225832598072171888
    empty_metatile_detection:
        size: 4144
        hash: -7657621180573147007
    cost:
        # default to 40 [ms]
        tileonly_generation_time: 40
        # default to 30 [ms]
        tile_generation_time: 30
        # default to 30 [ms]
        metatile_generation_time: 30
        # default to 20 [ko]
        tile_size: 20

layers:
    plan:
        layers: ch.swisstopo.geologie-geotechnik-gk500-lithologie_hauptgruppen
    plan_color:
        layers: plan_color
    ortho:
        extension: jpeg
        mime_type: image/jpeg
        # no buffer needed on rater sources
        meta_buffer: 0
        empty_tile_detection:
            size: 1096
            hash: -2225832598072171888
        empty_metatile_detection:
            size: 4144
            hash: -7657621180573147007
    mapnik:
        type: mapnik
        # buffer to gets the data
        # with mapnik it's better to use data_buffer than meta_buffer
        meta_buffer: 0
        data_buffer: 128
        mapfile: style.mapnik
        # the output_format used for the mapnik renderer, can be png, png256, jpeg, grid (grid_renderer)
        output_format: png
    grid:
        type: mapnik
        mapfile: style.mapnik
        output_format: grid
        extension: json
        # mime type used for the WMTS capabilities generation
        mime_type: application/utfgrid
        # UTFGrid resolution [px]
        resolution: 4
        # no metatiles (not supported for UTFGrid)
        meta: off
        data_buffer: 128
        # fields names to extort to the UTFGrid
        layers_fields:
            foo: [name]
            bar: [name, description]

generation:
    default_cache: local
    default_layers: [plan, plan_color, ortho]
    # used to allod only a specific user to generate tiles (for rights issue)
    authorised_user: www-data

    # not already implemented [optional]
    number_process: 8

    # not already implemented [defaut to 10]
    maxconsecutive_errors: 10
    # geodata folder to sync with the tile worker, not already implemented
    geodata_folder: /var/sig/package

    # [default to tilegeneration/deploy.cfg]
    deploy_config: tilegeneration/deploy.cfg

    # disable geodata sync, not already implemented [default to no]
    disable_sync: no
    # disable code deploy, not already implemented [default to no]
    disable_code: no
    # disable database deploy, not already implemented [default to no]
    disable_database: no
    # disable sqs tile queue filling , not already implemented [default to no]
    disable_fillqueue: no
    # disable tile generation, not already implemented [default to no]
    disable_tilesgen: no

openlayers:
    # srs, center_x, center_y [required]
    srs: EPSG:21781
    center_x: 600000
    center_y: 200000

cost:
    # [nb/month] [default to 10 000 000]
    request_per_layers: 10000000
    # GeoData size [Go] [default to 100]
    esb_size: 100

sns:
    topic: arn:aws:sns:eu-west-1:your-account-id:tilecloud
